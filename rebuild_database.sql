DROP TABLE WorksAtRestaurant;
DROP TABLE SignatureDish;
DROP TABLE Award;
DROP TABLE ProfessionalCritic;
DROP TABLE FoodBlogger;
DROP TABLE Review;
DROP TABLE Reviewer;
DROP TABLE LeadChef;
DROP TABLE Restaurant;
DROP TABLE Location;
DROP TABLE Cuisine;

CREATE TABLE Cuisine (
    CuisineID INT,
    Name VARCHAR(1000) NOT NULL,
    Description VARCHAR(1000),
    PRIMARY KEY (CuisineID)
);

CREATE TABLE Location (
    Address VARCHAR(1000) NOT NULL,
    PostalCode VARCHAR(1000) NOT NULL,
    City VARCHAR(1000) NOT NULL,
    Province VARCHAR(1000) NOT NULL,
    PRIMARY KEY (Address, PostalCode)
);

CREATE TABLE Reviewer (
    ReviewerID INT,
    Name VARCHAR(1000) NOT NULL,
    PRIMARY KEY (ReviewerID)
);

CREATE TABLE LeadChef (
    ChefID INT,
    Name VARCHAR(1000) NOT NULL,
    Biography CLOB,
    PRIMARY KEY (ChefID)
);

CREATE TABLE Restaurant (
    RestaurantID INT,
    Name VARCHAR(1000) NOT NULL,
    Website VARCHAR(1000) NOT NULL,
    PriceRange VARCHAR(1000),
    Address VARCHAR(1000),
    PostalCode VARCHAR(1000),
    AverageScore DECIMAL,
    CuisineID INT,
    PRIMARY KEY (RestaurantID),
    FOREIGN KEY (Address, PostalCode) REFERENCES Location(Address, PostalCode) ON DELETE SET NULL,
    FOREIGN KEY (CuisineID) REFERENCES Cuisine(CuisineID) ON DELETE SET NULL
);

CREATE TABLE WorksAtRestaurant (
    ChefID INT NOT NULL,
    RestaurantID INT NOT NULL,
    PRIMARY KEY (ChefID, RestaurantID),
    FOREIGN KEY (ChefID) REFERENCES LeadChef(ChefID),
    FOREIGN KEY (RestaurantID) REFERENCES Restaurant(RestaurantID)
);

CREATE TABLE SignatureDish (
    DishName VARCHAR(1000) NOT NULL,
    RestaurantID INT NOT NULL,
    Description VARCHAR(1000),
    Course VARCHAR(1000),
    CuisineID INT,
    PRIMARY KEY (DishName, RestaurantID),
    FOREIGN KEY (RestaurantID) REFERENCES Restaurant(RestaurantID),
    FOREIGN KEY (CuisineID) REFERENCES Cuisine(CuisineID) ON DELETE SET NULL
);

CREATE TABLE Award (
    AwardID INT,
    Name VARCHAR(1000) NOT NULL,
    MichelinRating INT,
    Description CLOB,
    RestaurantID INT,
    PRIMARY KEY (AwardID),
    FOREIGN KEY (RestaurantID) REFERENCES Restaurant(RestaurantID) ON DELETE SET NULL
);

CREATE TABLE ProfessionalCritic (
    ReviewerID INT NOT NULL,
    Title VARCHAR(1000),
    PRIMARY KEY (ReviewerID),
    FOREIGN KEY (ReviewerID) REFERENCES Reviewer(ReviewerID) ON DELETE CASCADE
);

CREATE TABLE FoodBlogger (
    ReviewerID INT NOT NULL,
    Website VARCHAR(1000),
    PRIMARY KEY (ReviewerID),
    FOREIGN KEY (ReviewerID) REFERENCES Reviewer(ReviewerID) ON DELETE CASCADE
);

CREATE TABLE Review (
    ReviewID INT GENERATED BY DEFAULT ON NULL AS IDENTITY,
    RestaurantID INT NOT NULL,
    ReviewerID INT NOT NULL,
    "Date" DATE NOT NULL,
    Score INT,
    "Comment" CLOB,
    PRIMARY KEY (ReviewID),
    FOREIGN KEY (ReviewerID) REFERENCES Reviewer(ReviewerID),
    FOREIGN KEY (RestaurantID) REFERENCES Restaurant(RestaurantID)
);

/*
- Dynasty Seafood
*/
INSERT INTO Cuisine
VALUES(1, 'Chinese', 'Cantonese');

/* 
- Homer St. Cafe
- Bacchus
*/
INSERT INTO Cuisine
VALUES(2, 'Contemporary', 'French');

/*
- Sushi Jin
- Okeya Kyujiro
- Sushi Hil
*/
INSERT INTO Cuisine
VALUES(3, 
'Japanese', 
'Sushi');

INSERT INTO Cuisine
VALUES(4, 'Contemporary', 'French');

INSERT INTO Cuisine
VALUES(5, 'Japanese', 'Sushi');

INSERT INTO Cuisine
VALUES(6, 'Japanese', 'Sushi');

INSERT INTO Location
VALUES('3330 Main St.', 
'V5V 3M7', 
'Vancouver', 
'BC');

INSERT INTO Location
VALUES('1038 Mainland St.', 'V6B 2T4', 'Vancouver', 'BC');

INSERT INTO Location
VALUES('750 Nelson St.', 'V6Z 1A8', 'Vancouver', 'BC');

INSERT INTO Location
VALUES('898 Homer St.', 'V6B 2W5', 'Vancouver', 'BC');

INSERT INTO Location
VALUES('845 Hornby St.', 'V6Z 1V1', 'Vancouver', 'BC');

INSERT INTO Location
VALUES('108-777 W. Broadway', 'V5Z 4J7', 'Vancouver', 'BC');


INSERT INTO LeadChef
VALUES(1, 'Hilary Nguy', 'Vietnamese Chef Hilary Nguy grew up in East Van, opening Sushi Hil in 2022.');

INSERT INTO LeadChef
VALUES(2, 'Takuya Matsuda', 'From Mie Prefecture, Japan, Chef Matsuda started his career at the age of 15, accumulating more than 25 years of experience.');

INSERT INTO LeadChef
VALUES(3, 'Chef Jin', 'Chef Jin has over 30 years of experience serving extraordinary food to extraordinary guests.');

INSERT INTO LeadChef
VALUES(4, 'Bobby Milheron', 'Chef Bobby Milheron is the Executive Chef of Wentworth Hospitality Group and competed at the Canadian Culinary Championship in 2023.');

INSERT INTO LeadChef
VALUES(5, 'Montgomery Lau', 'Chef Montgomery Lau is the Executive Chef at Bacchus at Wedgewood Hotel.');

INSERT INTO LeadChef
VALUES(6, 'Sam Leung', 'Executive Chef Sam Leung began his apprenticeship in Guangzhou and immigrated to Canada in 1985.');


INSERT INTO Restaurant
VALUES(1, 'Sushi Hil', 'https://www.sushihil.com/', '$$', '3330 Main St.', 'V5V 3M7', NULL, 3);

INSERT INTO Restaurant
VALUES(2, 'Okeya Kyujiro', 'https://okeya.ca/', '$$$$', '1038 Mainland St.', 'V6B 2T4', NULL, 5);

INSERT INTO Restaurant
VALUES(3, 'Sushi Jin', 'https://sushijinvancouver.ca/', '$$$$', '750 Nelson St.', 'V6Z 1A8', NULL, 6);

INSERT INTO Restaurant
VALUES(4, 'Homer St. Cafe', 'https://www.homerstreetcafebar.com/', '$$$', '898 Homer St.', 'V6B 2W5', NULL, 2);

INSERT INTO Restaurant
VALUES(5, 'Bacchus', 'https://wedgewoodhotel.com/dining/bacchus-restaurant/', '$$$', '845 Hornby St.', 'V6Z 1V1', NULL, 4);

INSERT INTO Restaurant
VALUES(6, 'Dynasty Seafood', 'https://dynasty-restaurant.ca/', '$$$', '108-777 W. Broadway', 'V5Z 4J7', NULL, 1);


INSERT INTO WorksAtRestaurant
VALUES(1, 1);

INSERT INTO WorksAtRestaurant
VALUES(2, 2);

INSERT INTO WorksAtRestaurant
VALUES(3, 3);

INSERT INTO WorksAtRestaurant
VALUES(4, 4);

INSERT INTO WorksAtRestaurant
VALUES(5, 5);

INSERT INTO WorksAtRestaurant
VALUES(6, 6);


INSERT INTO SignatureDish
VALUES('Aka Isaki', 1, 'Aka Isaki, or red grunt, is served with orange to underscore the 
power play of salinity and citrusy sweetness, while aji (mackerel) from Kagoshima has an 
added zing with grated ginger-scallion.', 'Main Course', 3);

INSERT INTO SignatureDish
VALUES('Omakase Course', 2, 'Highlights include chawanmushi with cherry blossom, shatteringly crispy 
tempura sandbar fish, spicy firefly squid on a bamboo skewer, and a presentation of two uni 
petals from different Japanese waters served with seaweed jam.', NULL, 5);

INSERT INTO SignatureDish
VALUES('Omakase', 3, 'Begin with otsumami such as live lobster sashimi, followed by delicious courses 
such as ankimo in a ponzu bath, and miso soup in lobster broth.', NULL, 6);

INSERT INTO SignatureDish
VALUES('Rotisserie Chicken', 4, 'Brined in Homer St. Cafes signature sauce overnight to render tender, flavourful meat.', NULL, 2);

INSERT INTO SignatureDish
VALUES('Tomato Soup', 5, 'Humble tomato soup is elevated.', NULL, 4);

INSERT INTO SignatureDish
VALUES('Dim Sum', 6, 'A wide selection from shrimp dumplings to congee and soups.', NULL, 1);


INSERT INTO Award
VALUES(1, 'Bib Gourmand', NULL, 'good quality, good value cooking', 1);

INSERT INTO Award
VALUES(2, 'Michelin Star', 1, 'High quality cooking', 2);

INSERT INTO Award
VALUES(3, 'Selected', NULL, 'Good cooking', 3);

INSERT INTO Award
VALUES(4, 'Selected', NULL, 'Good cooking', 4);

INSERT INTO Award
VALUES(5, 'Selected', NULL, 'Good cooking', 5);

INSERT INTO Award
VALUES(6, 'Selected', NULL, 'Good cooking', 6);

insert into Reviewer values (4, 'Karen');

insert into review values (null, 1, 4, TO_DATE('2024-07-09', 'YYYY-MM-DD'), 2, 'hi');